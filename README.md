# Scaffold Stellar Frontend

_To get started with Scaffold Stellar, visit its repo: [github.com/AhaLabs/scaffold-stellar](https://github.com/AhaLabs/scaffold-stellar)._

_Under active development._

A modern, up-to-date toolkit for building Stellar smart contract frontends.

- ‚ö°Ô∏è Vite + React + TypeScript
- üîó Auto-generated contract clients
- üß© Example components for contract interaction
- üõ† Hot reload for contract changes
- üß™ Easy local/testnet deployment

This is the starter frontend generated by `stellar scaffold init`. See more at [Scaffold Stellar](https://github.com/AhaLabs/scaffold-stellar).

## Requirements

Before getting started, make sure you‚Äôve met the requirements listed in the [Soroban documentation](https://developers.stellar.org/docs/build/smart-contracts/getting-started/setup) and that the following tools are installed :

- [Rust](https://www.rust-lang.org/tools/install)
- [Cargo](https://doc.rust-lang.org/cargo/) (comes with Rust)
- Rust target: install the compilation target listed in the [Soroban setup guide](https://developers.stellar.org/docs/build/smart-contracts/getting-started/setup)
- [Node.js](https://nodejs.org/en/download/package-manager) (v22, or higher)
- [npm](https://www.npmjs.com/): Comes with the node installer or can also be installed package managers such as Homebrew, Chocolatey, apt, etc.
- [Stellar CLI](https://github.com/stellar/stellar-core)
- [Scaffold Stellar CLI Plugin](https://github.com/AhaLabs/scaffold-stellar)

## Quick Start

To get started with a fresh Scaffold Stellar project, follow the steps below:

1. Initialize a new project:

```bash
stellar scaffold init my-project
cd my-project
```

2. Set up your development environment:

```bash
# Copy and configure environment variables like network and STELLAR_SCAFFOLD_ENV
cp .env.example .env

# Install frontend dependencies
npm install
```

Have a look at `environments.toml` for more fined-grained control.

3. Start development environment:

```bash
npm run dev
```

Open the server URL in your web browser.

4. Deploy Native XLM Contract (Local Development):

When starting fresh or after resetting the local blockchain, you need to deploy the native XLM Stellar Asset Contract (SAC):

```bash
stellar contract asset deploy --source me --network local --asset native
```

This deploys the native XLM token contract at its deterministic address (`CDMLFMKMMD7MWZP3FKUBZPVHTUEDLSX4BYGYKH4GCESXYHS3IHQ4EIG4`), which is required by the gene-splicer contract for fee payments.

5. For testnet/mainnet deployment:

When you are ready for testnet, you need to deploy your contract using
`stellar registry`. Some commands to get you started.

```bash
#  Note --source-account argument is omitted for clarity

# First publish your contract to the registry
stellar registry publish

# Then deploy an instance with constructor parameters
stellar registry deploy \
  --deployed-name my-contract \
  --published-name my-contract \
  -- \
  --param1 value1

# Can access the help docs with --help
stellar registry deploy \
  --deployed-name my-contract \
  --published-name my-contract \
  -- \
  --help

# Install the deployed contract locally
stellar registry create-alias my-contract
```

## Scaffold Initial Project Structure

When you run `stellar scaffold init`, it creates a frontend-focused project structure with example contracts:

```
my-project/                      # Your initialized project
‚îú‚îÄ‚îÄ contracts/                   # Example smart contracts
‚îú‚îÄ‚îÄ packages/                    # Auto-generated TypeScript clients
‚îú‚îÄ‚îÄ src/                         # Frontend React application
‚îÇ   ‚îú‚îÄ‚îÄ components/              # React components
‚îÇ   ‚îú‚îÄ‚îÄ contracts/               # Contract interaction helpers
‚îÇ   ‚îú‚îÄ‚îÄ debug/                   # Debugging contract explorer
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                   # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ pages/                   # App Pages
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # Main application component
‚îÇ   ‚îî‚îÄ‚îÄ main.tsx                 # Application entry point
‚îú‚îÄ‚îÄ target/                      # Build artifacts and WASM files
‚îú‚îÄ‚îÄ environments.toml            # Environment configurations
‚îú‚îÄ‚îÄ package.json                 # Frontend dependencies
‚îî‚îÄ‚îÄ .env                         # Local environment variables
```

This template provides a ready-to-use frontend application with example smart contracts and their TypeScript clients. You can use these as reference while building your own contracts and UI. The frontend is set up with Vite, React, and includes basic components for interacting with the contracts.

## ‚ö†Ô∏è Important: Contract Deployment & ID Sync

When you deploy or redeploy contracts, you **must** keep the contract IDs in sync across all config files, otherwise your frontend will fail silently!

### After deploying a contract:

1. **Check the new contract ID** - After deployment, the contract ID is stored in:

   ```bash
   cat .config/stellar/contract-ids/gene_splicer.json
   ```

2. **Update ALL contract ID locations** - Copy the contract ID to:
   - **`.env` file** (for local development):

     ```bash
     PUBLIC_GENE_SPLICER_CONTRACT_ID="CCL5G4HRTTBFASEBGJVF4OTLF2K3PWWUNLL3IWYZXI2CZAO4ZFJRHSPX"
     ```

   - **`.github/workflows/deploy.yml`** (for GitHub Pages deployment):
     ```yaml
     env:
       PUBLIC_GENE_SPLICER_CONTRACT_ID: CCL5G4HRTTBFASEBGJVF4OTLF2K3PWWUNLL3IWYZXI2CZAO4ZFJRHSPX
     ```

3. **Restart dev server** - The Vite dev server should auto-reload, but if not:
   ```bash
   # Stop npm run dev (Ctrl+C) and restart
   npm run dev
   ```

### How to verify everything is synced:

```bash
# Contract ID in Stellar config
cat .config/stellar/contract-ids/gene_splicer.json

# Contract ID in .env
grep PUBLIC_GENE_SPLICER_CONTRACT_ID .env

# Contract ID in GitHub Actions workflow
grep PUBLIC_GENE_SPLICER_CONTRACT_ID .github/workflows/deploy.yml

# These should ALL match!
```

**Why this matters:** The frontend reads contract IDs from environment variables. If the `.env` file has an old contract ID but the blockchain has a new one, transactions will succeed in simulation but fail silently on the network, and you won't see any data!
